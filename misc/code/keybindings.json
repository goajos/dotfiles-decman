// Place your key bindings in this file to override the default
[
    // focus editor after search
    {
        "key": "enter",
        "command": "runCommands",
        "args": {
            "commands": [
                "workbench.action.blur",
                "workbench.action.focusActiveEditorGroup"
            ]
        },
        "when": "searchInputBoxFocus"
    },
    // close sidebar with escape when explorer open
    {
        "key": "escape",
        "command": "workbench.action.toggleSidebarVisibility",
        "when": "foldersViewVisible && neovim.mode != insert && neovim.mode != visual"
    },
    // close sidebar and clear search with escape when search open
    {
        "key": "escape",
        "command": "runCommands",
        "args": {
            "commands": [
                "search.action.clearSearchResults",
                "workbench.action.toggleSidebarVisibility"
            ]
        },
        "when": "hasSearchResult && searchViewletVisible && neovim.mode != insert && neovim.mode != visual"
    },
    // close sidebar with escape when search open with no results
    {
        "key": "escape",
        "command": "runCommands",
        "args": {
            "commands": [
                "workbench.action.blur",
                "workbench.action.toggleSidebarVisibility",
                "workbench.action.focusActiveEditorGroup"
            ]
        },
        "when": "!hasSearchResult && searchViewletVisible && neovim.mode != insert && neovim.mode != visual"
    },
    // focus editor from terminal
    {
        "key": "ctrl+w k",
        "command": "workbench.action.focusActiveEditorGroup",
        "when": "terminalFocus || inDebugRepl || activePanel == workbench.panel.output"
    },
    // kill active terminal
    {
        "key": "ctrl+delete",
        "command": "terminalFocus && workbench.action.terminal.kill"
    },
    // close panel when terminal/debug repl/output open
    {
        "key": "escape",
        "command": "workbench.action.togglePanel",
        "when": "terminalFocus || inDebugRepl || activePanel == workbench.panel.output"
    },
    // close suggest widget
    {
        "key": "escape",
        "command": "hideSuggestWidget",
        "when": "editorFocus && suggestWidgetVisible"
    },
    // TODO: call these from neovim with :move?
    {
        "key": "alt+k",
        "command": "editor.action.moveLinesUpAction",
        "when": "editorTextFocus && !editorReadonly"
    },
    {
        "key": "alt+j",
        "command": "editor.action.moveLinesDownAction",
        "when": "editorTextFocus && !editorReadonly"
    },
]
